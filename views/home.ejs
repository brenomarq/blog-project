<%- include("partials/header.ejs") %>

<main id="post-section">
    <div class="intro">
        <h1>Welcome, dear User!</h1>
        <p>Here you can see your posts and enter whatever you want.</p>
        <button id="create" class="btn">Create</button>
    </div>
    <!--The posts will be listed right after the intro section-->
    <% if (listedPosts.length !== 0) { %>
    <% listedPosts.forEach((post) => { %>
        <div class="post">
            <div class="post-header">
                <h2> <%= post["title"] %> </h2>
                <h3> Author: <%= post["author"] %> </h3>
            </div>
            <div class="post-content">
                <p> <%= post["content"] %> </p>
            </div>
            <div class="post-buttons"></div>
        </div>
    <% })} else { %>
    <% } %>
</main>

<!--Modal-->
<div id="fade" class="hide"></div>
<div id="modal" class="hide">
    <div class="modal-header">
        <h2>Write your thoughts:</h2>
        <button id="close" class="btn">Close</button>
    </div>
    <form action="/create" method="post" class="post-info">
        <label for="title">Title:</label>
        <input type="text" name="title">
        <label for="author">Author:</label>
        <input type="text" name="author">
        <label for="content">Content:</label>
        <textarea name="content" id="content" cols="30" rows="10"></textarea>
        <input type="submit" name="Publish" class="btn">
    </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="js/modal.js"></script>

<%- include("partials/footer.ejs") %>
